<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <title>Chart List</title>
</head>
<body>
<h1 class="d-flex justify-content-center"> Anesthetic Charts</h1><br>
<div th:if="${#lists.isEmpty(chartsPage)}"><h3>There are no anaesthetic charts</h3></div>
<div th:unless="${chartsPage.isEmpty()}" class="container">
    <span th:text="'Viso irasu ' + ${chartsPage.totalElements}"></span>
    <span th:text="'Viso puslapiu ' + ${chartsPage.totalPages}"></span>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>
                <a th:with="direction=${chartsPage.sort.getOrderFor('name')?.direction}"
                   th:href="@{/chart/page(sort='name,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}">
                    Name
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}"></i>
                </a>
            </th>
            <th>
                <a th:with="direction=${chartsPage.sort.getOrderFor('surname')?.direction}"
                        th:href="@{/chart/page(sort='surname,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}">
                    Surname
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}"></i>
                </a>
            </th>
            <th>Hospital Number</th>
            <th>DOB</th>
            <th>
                <a th:with="direction=${chartsPage.sort.getOrderFor('operation')?.direction}"
                        th:href="@{/chart/page(sort='operation,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}">
                    Operation
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}"></i>
                </a>
            </th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="patientDemographics: ${chartsPage}">
            <td><a th:href="@{'/chart/update?uuid=' + ${patientDemographics.uuid}}"
                   th:text="${patientDemographics.name}"></a></td>
            <td th:text="${patientDemographics.surname}"></td>
            <td th:text="${patientDemographics.hospitalNumber}"></td>
            <td th:text="${patientDemographics.dob}"></td>
            <td th:text="${patientDemographics.operation}"></td>
            <td><a th:href="@{/chart/delete(uuid=${patientDemographics.uuid})}"> Delete</a></td>
        </tr>
        </tbody>
    </table>
    <div aria-label="Page navigation example" class="d-flex justify-content-center">
        <ul class="pagination">
            <li class="page-item"
                th:classappend="${!chartsPage.hasPrevious()} ? 'disabled'"
            ><a class="page-link" th:href="@{/chart/page(page=${chartsPage.number} - 1)}">Previous</a>
            </li>

            <li class="page-item" th:each="pageNumber: ${#numbers.sequence(0, chartsPage.totalPages - 1)}"
                th:classappend="${pageNumber == chartsPage.number ? 'active' : ''}">
                <a class="page-link" th:href="@{/chart/page(page=${pageNumber})}" th:text="${pageNumber + 1}"></a>
            </li>

            <li class="page-item"
                th:classappend="${!chartsPage.hasNext()} ? 'disabled'"
            ><a class="page-link" th:href="@{/chart/page(page=${chartsPage.number} + 1)}">Next</a></li>
        </ul>
    </div>
</div>
</body>
</html>