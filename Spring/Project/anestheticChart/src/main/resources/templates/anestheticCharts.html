<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="/js/language.js"></script>
    <title>Anesthetic Charts</title>
</head>
<body>
<select id="languageSelector">
    <option value="" th:text="#{lang.options}"></option>
    <option value="LT" th:text="LietuviÅ³"></option>
    <option value="US" th:text="English"></option>
</select>
<h1 class="d-flex justify-content-center" th:field="#{chart.title}"></h1><br>
<div th:if="${!chartsPage.hasContent()}" th:field="#{chart.noCharts}"><h3></h3></div>
<div th:if="${chartsPage.hasContent()}" class="container">
    <span th:text="'Viso irasu ' + ${chartsPage.totalElements}"></span>
    <span th:text="'Viso puslapiu ' + ${chartsPage.totalPages}"></span>
    <table class="table table-striped">
        <thead>
        <tr>
            <th scope="col">
                <a th:with="direction=${chartsPage.sort.getOrderFor('name')?.direction}"
                   th:href="@{/chart/page(sort='name,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}"
                th:field="#{chart.name}">
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}"></i>
                </a>
            </th>
            <th scope="col">
                <a th:with="direction=${chartsPage.sort.getOrderFor('surname')?.direction}"
                        th:href="@{/chart/page(sort='surname,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}"
                th:field="#{chart.surname}">
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}"></i>
                </a>
            </th>
            <th scope="col" th:field="#{chart.hospitalNumber}"></th>
            <th scope="col" th:field="#{chart.dob}"></th>
            <th scope="col">
                <a th:with="direction=${chartsPage.sort.getOrderFor('operation')?.direction}"
                        th:href="@{/chart/page(sort='operation,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}"
                th:field="#{chart.operation}">
                    <i class="fa-solid"
                       th:classappend="${direction?.name() eq 'ASC' ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"
                       th:if="${direction ne null}"></i>
                </a>
            </th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="patientDemographics: ${chartsPage}">
            <td><a th:href="@{'/chart/update?uuid=' + ${patientDemographics.uuid}}"
                   th:text="${patientDemographics.name}"></a></td>
            <td th:text="${patientDemographics.surname}"></td>
            <td th:text="${patientDemographics.hospitalNumber}"></td>
            <td th:text="${patientDemographics.dob}"></td>
            <td th:text="${patientDemographics.operation}"></td>
            <td><a type="button" class="btn btn-danger" th:href="@{/chart/delete(uuid=${patientDemographics.uuid})}"
            th:field="#{button.delete}"> </a></td>
        </tr>
        </tbody>
    </table>
    <div aria-label="Page navigation example" class="d-flex justify-content-center">
        <ul class="pagination"
            th:with="orderParam=${chartsPage.sort.iterator().hasNext() ? chartsPage.sort.iterator().next : null},
            sortParam=${orderParam.property + ',' + orderParam.direction + ',ignorecase'}">
            <li class="page-item"
                th:classappend="${!chartsPage.hasPrevious()} ? 'disabled'"
            ><a class="page-link" th:field="#{button.previous}"
                th:href="@{/chart/page(page=${chartsPage.number} - 1,sort=${sortParam})}"></a>
            </li>

            <li class="page-item" th:each="pageNumber: ${#numbers.sequence(0, chartsPage.totalPages - 1)}"
                th:classappend="${pageNumber == chartsPage.number ? 'active' : ''}">
                <a class="page-link" th:href="@{/chart/page(page=${pageNumber},sort=${sortParam})}" th:text="${pageNumber + 1}"></a>
            </li>

            <li class="page-item"
                th:classappend="${!chartsPage.hasNext()} ? 'disabled'"
            ><a class="page-link" th:href="@{/chart/page(page=${chartsPage.number} + 1,sort=${sortParam})}"
            th:field="#{button.next}"></a></li>
        </ul>
    </div>
</div>
</body>
</html>